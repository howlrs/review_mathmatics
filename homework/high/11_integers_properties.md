# 数学A: 整数の性質 (1) 約数・倍数・素数 (Session 11)

**対象**: 社会人エンジニア (Rust/Go)
**学習目標**: 整数の基本的性質（約数、倍数、素数、剰余）とユークリッドの互除法を習得する。これらは暗号理論やハッシュアルゴリズム、乱数生成の基礎となる。

---

## Phase 1: Foundational Check (基礎確認 10問)

**指針**: 「困ったときは『定義』に還れ」。整数の割り算 $a = bq + r$ ($0 \le r < b$) が全ての基本である。

1.  **[約数と倍数]** 24の正の約数をすべて書き出せ。また、正の約数の個数を求めよ。
    > **Prog Link**: ループ `for i in 1..=24` で `24 % i == 0` を判定する処理。

2.  **[素因数分解]** 360 を素因数分解せよ。
    > **Maxim**: 「複雑な問題は『素因数分解』せよ」。文字通り、数を構成要素に分解する。

3.  **[約数の個数]** $360$ の正の約数の個数を求めよ。
    > **Formula**: $N = p^a q^b r^c \dots$ のとき、約数の個数は $(a+1)(b+1)(c+1)\dots$。組合せ論的解釈。

4.  **[最大公約数・最小公倍数]** 2つの自然数 $12, 18$ の最大公約数 (GCD) と最小公倍数 (LCM) を求めよ。

5.  **[最大公約数・最小公倍数]** 3つの自然数 $12, 18, 30$ の最大公約数と最小公倍数を求めよ。

6.  **[剰余の性質]** 整数 $a$ を 5 で割ると 3 余り、整数 $b$ を 5 で割ると 4 余る。このとき、 $a+b$ を 5 で割った余りを求めよ。
    > **Prog Link**: モジュラ演算 (Modular Arithmetic)。 $(a+b) \pmod n = (a \pmod n + b \pmod n) \pmod n$。

7.  **[剰余の性質]** 前問の $a, b$ について、 $ab$ を 5 で割った余りを求めよ。

8.  **[ユークリッドの互除法]** ユークリッドの互除法を用いて、 $289$ と $187$ の最大公約数を求めよ。
    > **Algorithm**: `gcd(a, b) = gcd(b, a % b)`。再帰的アルゴリズムの代表例。

9.  **[互いに素]** 2つの自然数 $a, b$ が「互いに素」であるとはどういうことか定義せよ。

10. **[倍数判定法]** 5桁の自然数 $1234\Box$ が3の倍数になるような、 $\Box$ に入る数字（0〜9）をすべて答えよ。
    > **Logic**: 各桁の和が3の倍数 $\iff$ 元の数が3の倍数。

---

## Phase 2: Applied Mastery (応用・実践 10問)

**指針**: 「『解き方』は一つにあらず」。不定方程式の解法や、剰余類による分類（Case Analysis）を使いこなせ。

11. **[約数の総和]**
    $360$ の正の約数の総和を求めよ。
    > **Formula**: $(1+p+\dots+p^a)(1+q+\dots+q^b)\dots$。展開するとすべての約数の和になる。

12. **[最小公倍数の利用]**
    縦 12cm、横 18cm の長方形のタイルを敷き詰めて、できるだけ小さい正方形を作りたい。正方形の1辺の長さと、必要なタイルの枚数を求めよ。

13. **[余りによる分類]**
    $n$ は整数とする。 $n^2$ を 3 で割った余りは、 $0$ または $1$ であることを証明せよ。
    > **Logic**: $n$ を $3k, 3k+1, 3k+2$ に分類して2乗する。

14. **[不定方程式]**
    方程式 $3x + 5y = 1$ の整数解を1組見つけよ。
    > **Algorithm**: 拡張ユークリッドの互除法 (Extended Euclidean Algorithm)。

15. **[不定方程式の一般解]**
    方程式 $3x + 5y = 1$ のすべての整数解を整数 $k$ を用いて表せ。
    > **Prog Link**: パラメータ化された解空間。

16. **[互除法の応用]**
    $7n + 4$ と $6n + 3$ の最大公約数が 3 になるような、 50以下の自然数 $n$ をすべて求めよ。
    > **Tip**: 互除法を進めて $n$ を消去する。 $\text{gcd}(7n+4, 6n+3) = \text{gcd}(n+1, 6n+3) = \dots$

17. **[素数の性質]**
    $p$ が素数で、 $p+2$ も素数であるとき、これらを「双子素数」と呼ぶ。 $p, p+2$ がともに素数で、かつ $p > 3$ ならば、 $p+1$ は 6 の倍数であることを証明せよ。
    > **Logic**: 連続する3整数 $p, p+1, p+2$ の性質（必ず3の倍数が含まれる）を利用。

18. **[階乗に含まれる素因数]**
    $30!$ ($30$の階乗) を素因数分解したとき、素因数 $3$ の指数（何回掛けられているか）を求めよ。
    > **Algorithm**: ルジャンドルの定理。 $30/3 + 30/9 + 30/27$。

19. **[n進法]** (Session 12への導入)
    10進数の $25$ を 2進数で表せ。
    > **Prog Link**: `0b11001`。

20. **[RSA暗号の基礎]** (発展)
    2つの素数 $p=3, q=11$ とする。 $n = pq = 33$。 $\phi(n) = (p-1)(q-1) = 20$。
    $e = 3$ とする（$e$ と $\phi(n)$ は互いに素）。
    $ed \equiv 1 \pmod{\phi(n)}$ となる $d$ を求めよ。
    > **Prog Link**: 秘密鍵 $d$ の生成プロセス。 $3d \equiv 1 \pmod{20}$ を解く（モジュラ逆数）。

---

## 解答と解説

### Phase 1

1.  **1, 2, 3, 4, 6, 8, 12, 24 (8個)**
2.  **$2^3 \cdot 3^2 \cdot 5$**
    *   $360 = 36 \cdot 10 = (2^2 \cdot 3^2) \cdot (2 \cdot 5) = 2^3 \cdot 3^2 \cdot 5$。
3.  **24個**
    *   $(3+1)(2+1)(1+1) = 4 \cdot 3 \cdot 2 = 24$。
4.  **GCD: 6, LCM: 36**
    *   $12 = 2^2 \cdot 3, 18 = 2 \cdot 3^2$。
    *   GCD: $2^1 \cdot 3^1 = 6$。 LCM: $2^2 \cdot 3^2 = 36$。
5.  **GCD: 6, LCM: 180**
    *   $30 = 2 \cdot 3 \cdot 5$。
    *   GCD: $2 \cdot 3 = 6$。 LCM: $2^2 \cdot 3^2 \cdot 5 = 180$。
6.  **2**
    *   $3+4=7 \equiv 2 \pmod 5$。
7.  **2**
    *   $3 \times 4 = 12 \equiv 2 \pmod 5$。
8.  **17**
    *   $289 = 187 \times 1 + 102$
    *   $187 = 102 \times 1 + 85$
    *   $102 = 85 \times 1 + 17$
    *   $85 = 17 \times 5 + 0$
    *   よって GCD は 17。
9.  **定義**
    *   最大公約数が 1 であること。
10. **2, 5, 8**
    *   $1+2+3+4 = 10$。
    *   $10 + \Box$ が3の倍数になるには、 $\Box = 2, 5, 8$。

### Phase 2

11. **1170**
    *   $(1+2+4+8)(1+3+9)(1+5) = 15 \cdot 13 \cdot 6 = 1170$。
12. **1辺 36cm, タイル 6枚**
    *   LCM(12, 18) = 36。
    *   縦 $36/12 = 3$枚、横 $36/18 = 2$枚。計 $3 \times 2 = 6$枚。
13. **証明**
    *   $n \equiv 0 \pmod 3 \Rightarrow n^2 \equiv 0$。
    *   $n \equiv 1 \pmod 3 \Rightarrow n^2 \equiv 1$。
    *   $n \equiv 2 \pmod 3 \Rightarrow n^2 \equiv 4 \equiv 1$。
    *   よって 0 または 1。
14. **$x=2, y=-1$**
    *   $3(2) + 5(-1) = 6 - 5 = 1$。
15. **$x = 5k + 2, y = -3k - 1$**
    *   $3(x-2) + 5(y+1) = 0 \Rightarrow 3(x-2) = -5(y+1)$。
    *   3と5は互いに素なので、 $x-2 = 5k, y+1 = -3k$。
16. **$n = 2, 5, 8, \dots, 50$ (計17個)**
    *   $gcd(7n+4, 6n+3) = gcd(n+1, 6n+3) = gcd(n+1, 6(n+1)-3) = gcd(n+1, -3) = gcd(n+1, 3)$。
    *   これが3になる $\iff n+1$ が3の倍数。
    *   $n+1 = 3k \Rightarrow n = 3k-1$。
    *   $1 \le 3k-1 \le 50 \Rightarrow 2 \le 3k \le 51 \Rightarrow 0.6 \le k \le 17$。
    *   $k=1, \dots, 17$ の17個。
17. **証明**
    *   $p, p+1, p+2$ は連続する3整数なので、必ずどれか1つは3の倍数である。
    *   $p, p+2$ は素数であり、$p>3$ なので、これらは3の倍数ではない。
    *   よって間の $p+1$ が3の倍数である。
    *   また、$p$ は奇数の素数（$p>3$）なので、 $p+1$ は偶数（2の倍数）。
    *   2の倍数かつ3の倍数なので、 $p+1$ は6の倍数である。
18. **14**
    *   $30 \div 3 = 10$
    *   $30 \div 9 = 3 \dots 3$
    *   $30 \div 27 = 1 \dots 3$
    *   $10 + 3 + 1 = 14$。
19. **$11001_2$**
    *   $25 = 16 + 8 + 1 = 1 \cdot 2^4 + 1 \cdot 2^3 + 0 \cdot 2^2 + 0 \cdot 2^1 + 1 \cdot 2^0$。
20. **$d = 7$**
    *   $3d \equiv 1 \pmod{20}$。
    *   $3 \times 7 = 21 \equiv 1$。
    *   よって $d=7$。

