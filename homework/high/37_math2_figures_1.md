# 数学II: 図形と方程式 (1) 点と座標 (Session 37)

**対象**: 社会人エンジニア (Rust/Go)
**学習目標**: 座標平面上の点、距離、内分・外分点の公式を習得し、ベクタグラフィックスや物理シミュレーションにおける座標計算の基礎を固める。

---

## Phase 1: Foundational Check (基礎確認 10問)

**指針**: 「困ったときは『定義』に還れ」。距離はピタゴラスの定理、分点は加重平均である。

1.  **[2点間の距離]** 2点 $A(x_1, y_1), B(x_2, y_2)$ 間の距離 $AB$ を求めよ。
    > **Prog Link**: `hypot(dx, dy)`。ユークリッド距離。

2.  **[内分点]** 2点 $A(-1), B(4)$ を $2:3$ に内分する点の座標を求めよ（数直線）。
    > **Formula**: $\frac{3(-1) + 2(4)}{2+3}$。

3.  **[外分点]** 2点 $A(-1), B(4)$ を $2:3$ に外分する点の座標を求めよ（数直線）。
    > **Formula**: $\frac{-3(-1) + 2(4)}{2-3}$。

4.  **[平面上の内分点]** 2点 $A(1, 1), B(4, 7)$ を $1:2$ に内分する点の座標を求めよ。

5.  **[中点]** 2点 $A(a, b), B(c, d)$ の中点の座標を求めよ。

6.  **[重心]** 3点 $A(0, 0), B(4, 0), C(2, 3)$ を頂点とする三角形の重心の座標を求めよ。

7.  **[距離の計算]** 原点 $O$ と点 $P(3, -4)$ の距離を求めよ。

8.  **[対称点]** 点 $P(2, 3)$ に関して、原点 $O$ と対称な点 $Q$ の座標を求めよ。
    > **Logic**: $P$ が $OQ$ の中点。

9.  **[等距離]** 2点 $A(1, 1), B(3, 3)$ から等距離にある点 $P(x, y)$ の軌跡の方程式を求めよ。
    > **Term**: 垂直二等分線。

10. **[プログラミング]** 2点間の距離の2乗 `distSq` を計算することのメリットは何か。
    > **Tech**: 平方根計算 (sqrt) を回避でき、高速かつ精度が良い（大小比較だけなら2乗で十分）。

---

## Phase 2: Applied Mastery (応用・実践 10問)

**指針**: 「条件を使い切ったか確認せよ」。座標幾何学（解析幾何学）の強みは、図形の性質を数式で処理できることにある。

11. **[三角形の形状]**
    3点 $A(1, 1), B(4, 2), C(2, 4)$ を頂点とする $\triangle ABC$ はどのような三角形か。
    > **Algorithm**: 3辺の長さの2乗を計算する。

12. **[平行四辺形]**
    3点 $A(1, 1), B(4, 2), C(5, 5)$ がある。四角形 $ABCD$ が平行四辺形となるような点 $D$ の座標を求めよ。
    > **Logic**: $AB$ ベクトル = $DC$ ベクトル、または対角線の中点が一致。

13. **[最短距離]**
    2点 $A(1, 2), B(5, 3)$ がある。 $x$ 軸上の点 $P$ について、 $AP + PB$ が最小となるときの $P$ の座標を求めよ。
    > **Algorithm**: 光の反射の原理。 $A$ を $x$ 軸に関して対称移動した点 $A'$ と $B$ を結ぶ直線。

14. **[重心の性質]**
    $\triangle ABC$ の重心を $G$ とする。 $GA^2 + GB^2 + GC^2$ が最小となるのは、 $\triangle ABC$ がどのような三角形のときか（辺の長さが固定されている場合など条件が必要だが、ここでは一般論として $G$ が距離の2乗和を最小化する点であることを確認）。
    問題変更: 点 $P$ が $\triangle ABC$ の平面上にあるとき、 $PA^2 + PB^2 + PC^2$ を最小にする点 $P$ はどこか。
    > **Answer**: 重心 $G$。

15. **[中線定理]** (パップスの定理)
    $\triangle ABC$ の辺 $BC$ の中点を $M$ とするとき、 $AB^2 + AC^2 = 2(AM^2 + BM^2)$ が成り立つことを座標を用いて証明せよ。
    > **Setup**: $M$ を原点、 $B(-c, 0), C(c, 0), A(a, b)$ と置く。

16. **[内分点の利用]**
    $\triangle ABC$ の辺 $AB, BC, CA$ を $2:1$ に内分する点をそれぞれ $P, Q, R$ とする。 $\triangle PQR$ の重心は $\triangle ABC$ の重心と一致することを証明せよ。

17. **[直線の通過領域]**
    実数 $t$ が変化するとき、点 $P(t, t^2)$ の軌跡を求めよ。

18. **[アポロニウスの円]**
    2点 $A, B$ からの距離の比が $2:1$ である点 $P$ の軌跡はどのような図形か。
    > **Term**: アポロニウスの円。内分点と外分点を直径の両端とする円。

19. **[座標変換]** (発展)
    点 $(x, y)$ を原点中心に $\theta$ 回転させた点 $(x', y')$ を表す行列（または式）を記述せよ。
    > **Formula**: $x' = x \cos \theta - y \sin \theta, y' = x \sin \theta + y \cos \theta$。

20. **[プログラミング: 線形補間]**
    ゲーム開発において、開始点 $A$ から終了点 $B$ へ時間 $t$ ($0 \le t \le 1$) かけて移動するアニメーションの座標計算式 `Lerp(A, B, t)` を記述せよ。
    > **Code**: `A + (B - A) * t` または `(1 - t) * A + t * B`。

---

## 解答と解説

### Phase 1

1.  **$\sqrt{(x_2-x_1)^2 + (y_2-y_1)^2}$**
2.  **1**
    *   $(-3+8)/5 = 1$。
3.  **-11**
    *   $(3+8)/(-1) = -11$。
4.  **$(2, 3)$**
    *   $x: (1+8)/3 = 3, y: (1+14)/3 = 5$ ... 訂正。
    *   $x: (1 \cdot 1 + 2 \cdot 4)/3$? 逆。 $1:2$ に内分。
    *   $x = \frac{2(1) + 1(4)}{3} = 6/3 = 2$。
    *   $y = \frac{2(1) + 1(7)}{3} = 9/3 = 3$。
    *   答え: $(2, 3)$。
5.  **$(\frac{a+c}{2}, \frac{b+d}{2})$**
6.  **$(2, 1)$**
    *   $(0+4+2)/3 = 2, (0+0+3)/3 = 1$。
7.  **5**
8.  **$(4, 6)$**
    *   $P$ が中点。 $(0+x)/2 = 2 \to x=4$。
9.  **$y = -x + 4$**
    *   $A, B$ の中点 $(2, 2)$。傾き $(3-1)/(3-1) = 1$。
    *   垂直二等分線の傾き $-1$。
    *   $y - 2 = -1(x - 2) \Rightarrow y = -x + 4$。
10. **平方根計算の回避**

### Phase 2

11. **二等辺三角形 ($AB=CA$)**
    *   $AB^2 = 3^2 + 1^2 = 10$。
    *   $BC^2 = 2^2 + 2^2 = 8$。
    *   $CA^2 = 1^2 + 3^2 = 10$。
    *   $AB=CA=\sqrt{10}$。
12. **$(2, 4)$**
    *   $A \to B$ は $(3, 1)$ 移動。
    *   $D \to C$ も $(3, 1)$ 移動。
    *   $D(x, y) \to x+3=5, y+1=5 \Rightarrow x=2, y=4$。
13. **$(13/5, 0)$**
    *   $A'(1, -2)$。直線 $A'B$ の式。
    *   傾き $(3 - (-2)) / (5 - 1) = 5/4$。
    *   $y - 3 = 5/4(x - 5)$。 $y=0$ のとき $-3 = 5/4(x-5) \Rightarrow -12/5 = x-5 \Rightarrow x = 13/5$。
14. **重心 $G$**
    *   平方完成により証明できる。
15. **証明**
    *   左辺: $(a+c)^2 + b^2 + (a-c)^2 + b^2 = 2a^2 + 2c^2 + 2b^2$。
    *   右辺: $2(a^2+b^2 + c^2)$。一致。
16. **証明**
    *   $P = (2B+A)/3, Q = (2C+B)/3, R = (2A+C)/3$。
    *   重心 $(P+Q+R)/3 = (3A+3B+3C)/9 = (A+B+C)/3$。一致。
17. **放物線 $y = x^2$**
18. **円**
    *   $AP:PB = 2:1 \Rightarrow AP = 2PB \Rightarrow AP^2 = 4PB^2$。
    *   座標計算すると円の方程式になる。
19. **回転行列**
20. **線形補間 (Lerp)**

