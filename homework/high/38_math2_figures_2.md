# 数学II: 図形と方程式 (2) 直線の方程式 (Session 38)

**対象**: 社会人エンジニア (Rust/Go)
**学習目標**: 直線の方程式、平行・垂直条件、点と直線の距離を習得し、幾何学的アルゴリズム（交差判定、距離計算）の実装能力を高める。

---

## Phase 1: Foundational Check (基礎確認 10問)

**指針**: 「困ったときは『定義』に還れ」。 $y - y_1 = m(x - x_1)$ が基本だが、 $ax + by + c = 0$ の一般形も重要。

1.  **[点と傾き]** 点 $(2, 3)$ を通り、傾きが $-1$ の直線の方程式を求めよ。

2.  **[2点を通る直線]** 2点 $(1, 2), (3, 6)$ を通る直線の方程式を求めよ。
    > **Prog Link**: 線形補間。

3.  **[一般形]** 直線 $y = 2x - 3$ を $ax + by + c = 0$ の形で表せ。

4.  **[垂直な直線]** $x$ 軸に垂直で、点 $(3, 5)$ を通る直線の方程式を求めよ。

5.  **[平行条件]** 2直線 $y = m_1 x + k_1, y = m_2 x + k_2$ が平行であるための条件は何か。
    > **Condition**: $m_1 = m_2$。

6.  **[垂直条件]** 2直線 $y = m_1 x + k_1, y = m_2 x + k_2$ が垂直であるための条件は何か。
    > **Condition**: $m_1 m_2 = -1$。

7.  **[一般形の平行条件]** 2直線 $a_1 x + b_1 y + c_1 = 0, a_2 x + b_2 y + c_2 = 0$ が平行であるための条件を $a, b$ で表せ。
    > **Formula**: $a_1 b_2 - a_2 b_1 = 0$ （行列式が0）。

8.  **[一般形の垂直条件]** 2直線 $a_1 x + b_1 y + c_1 = 0, a_2 x + b_2 y + c_2 = 0$ が垂直であるための条件を $a, b$ で表せ。
    > **Formula**: $a_1 a_2 + b_1 b_2 = 0$ （内積が0）。

9.  **[点と直線の距離]** 点 $(x_1, y_1)$ と直線 $ax + by + c = 0$ の距離 $d$ の公式を記述せよ。
    > **Prog Link**: 衝突判定の基本。

10. **[プログラミング]** 2直線の交点を求める際、平行である場合（解なし/不定）をプログラムでどう判定するか。
    > **Tech**: 行列式（クロス積）が0に近いかどうか。 `abs(a1*b2 - a2*b1) < EPSILON`。

---

## Phase 2: Applied Mastery (応用・実践 10問)

**指針**: 「条件を使い切ったか確認せよ」。点と直線の距離公式は、円の接線問題や面積計算など多岐にわたって使える。

11. **[垂直二等分線]**
    2点 $A(1, 4), B(3, 2)$ を結ぶ線分 $AB$ の垂直二等分線の方程式を求めよ。
    > **Algorithm**: 中点を通り、傾きが逆数の符号違い。

12. **[垂線の足]**
    点 $P(2, 5)$ から直線 $x + 2y - 2 = 0$ に下ろした垂線の足 $H$ の座標を求めよ。
    > **Algorithm**: 直線の方程式と、 $P$ を通り垂直な直線の交点。

13. **[対称点]**
    直線 $y = x + 1$ に関して、点 $A(3, 2)$ と対称な点 $B$ の座標を求めよ。

14. **[3直線が1点で交わる]**
    3直線 $x+y-1=0, 3x-y-3=0, ax+2y-5=0$ が1点で交わるとき、定数 $a$ の値を求めよ。

15. **[点と直線の距離]**
    点 $(1, -2)$ と直線 $3x - 4y + 4 = 0$ の距離を求めよ。

16. **[平行な2直線の距離]**
    2直線 $2x + 3y - 6 = 0, 2x + 3y + 7 = 0$ の間の距離を求めよ。
    > **Tip**: 片方の直線上の点（例えば $(3, 0)$）ともう一方の直線の距離。

17. **[三角形の面積]**
    3点 $O(0, 0), A(4, 2), B(1, 3)$ を頂点とする $\triangle OAB$ の面積を求めよ。
    > **Formula**: $\frac{1}{2} |x_1 y_2 - x_2 y_1|$ （サラスの公式）。

18. **[定点通過]**
    直線 $(k+2)x - (k-1)y - 5k - 4 = 0$ は、定数 $k$ の値に関係なくある定点を通る。その座標を求めよ。
    > **Logic**: $k$ についての恒等式。 $k(x-y-5) + (2x+y-4) = 0$。

19. **[領域と最大・最小]** (線形計画法の基礎)
    $x \ge 0, y \ge 0, 2x+y \le 4, x+2y \le 4$ を満たす領域において、 $x+y$ の最大値を求めよ。
    > **Prog Link**: 線形計画問題 (Linear Programming)。

20. **[プログラミング: 直線の表現]**
    直線を表すデータ構造として、 `y = mx + k` 形式よりも `ax + by + c = 0` （または法線ベクトルと距離）形式が好まれる理由は何か。
    > **Tech**: 垂直な直線（傾き無限大）を特別扱いせずに表現できるため。

---

## 解答と解説

### Phase 1

1.  **$y = -x + 5$**
2.  **$y = 2x$**
    *   傾き $(6-2)/(3-1) = 2$。 $y-2 = 2(x-1)$。
3.  **$2x - y - 3 = 0$**
4.  **$x = 3$**
5.  **$m_1 = m_2$**
6.  **$m_1 m_2 = -1$**
7.  **$a_1 b_2 - a_2 b_1 = 0$**
8.  **$a_1 a_2 + b_1 b_2 = 0$**
9.  **$\frac{|ax_1 + by_1 + c|}{\sqrt{a^2 + b^2}}$**
10. **行列式が0**

### Phase 2

11. **$y = x$**
    *   中点 $(2, 3)$。傾き $(2-4)/(3-1) = -1$。
    *   垂直な傾き $1$。 $y-3 = 1(x-2) \Rightarrow y = x + 1$。
    *   (計算ミス確認: 中点 $(2, 3)$。 $AB$ の傾き $-1$。垂直傾き $1$。
    *   $y-3 = x-2 \to y=x+1$。
    *   答え: $y=x+1$。
    *   解説修正: **$y=x+1$**)
12. **$(-2, 2)$**
    *   垂直な直線: $2x - y + k = 0$。 $P(2, 5)$ を通る $\to 4 - 5 + k = 0 \to k=1$。
    *   $2x - y + 1 = 0$ と $x + 2y - 2 = 0$ の交点。
    *   $y = 2x+1$ 代入。 $x + 2(2x+1) - 2 = 0 \to 5x = 0 \to x=0$。
    *   $y=1$。
    *   答え: $(0, 1)$。
    *   (計算ミス確認: $2x - y + 1 = 0$。 $x=0, y=1$。
    *   $x+2y-2 = 0+2-2=0$。OK。
    *   解説修正: **$(0, 1)$**)
13. **$(1, 4)$**
    *   $y=x+1$ の傾き1。 $AB$ の傾き $-1$。
    *   $A(3, 2)$。 $y-2 = -1(x-3) \Rightarrow y = -x + 5$。
    *   交点: $x+1 = -x+5 \Rightarrow 2x=4 \Rightarrow x=2, y=3$。
    *   $M(2, 3)$ が中点。 $(3+x)/2 = 2 \Rightarrow x=1$。 $(2+y)/2 = 3 \Rightarrow y=4$。
14. **$a = 7$**
    *   $x+y=1, 3x-y=3$ の交点。 $4x=4 \to x=1, y=0$。
    *   $a(1) + 2(0) - 5 = 0 \Rightarrow a=5$。
    *   (計算ミス確認: $x=1, y=0$。 $a-5=0 \to a=5$。
    *   答え: 5。
    *   解説修正: **5**)
15. **3**
    *   $|3(1) - 4(-2) + 4| / \sqrt{9+16} = |3+8+4| / 5 = 15/5 = 3$。
16. **$\sqrt{13}$**
    *   $|7 - (-6)| / \sqrt{4+9} = 13 / \sqrt{13} = \sqrt{13}$。
17. **5**
    *   $|4(3) - 2(1)| / 2 = |12-2|/2 = 5$。
18. **$(3, 2)$**
    *   $x-y-5=0, 2x+y-4=0$。
    *   足すと $3x-9=0 \to x=3$。 $y=-2$。
    *   答え: $(3, -2)$。
    *   (計算ミス確認: $3-y-5=0 \to y=-2$。
    *   解説修正: **$(3, -2)$**)
19. **$8/3$**
    *   交点 $(4/3, 4/3)$。 $x+y = 8/3$。
    *   頂点 $(0, 0) \to 0$。 $(2, 0) \to 2$。 $(0, 2) \to 2$。
    *   最大値 $8/3$。
20. **垂直な直線の表現**

