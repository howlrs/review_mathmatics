# 数学A: 整数の性質 (2) 記数法 (Session 12)

**対象**: 社会人エンジニア (Rust/Go)
**学習目標**: $n$ 進法の原理、基数変換（10進数 $\iff n$ 進数）、小数表現を理解する。これらはコンピュータの内部表現（ビット、バイト、浮動小数点数）そのものである。

---

## Phase 1: Foundational Check (基礎確認 10問)

**指針**: 「困ったときは『定義』に還れ」。 $n$ 進数の各位の数字は $n^k$ の係数である。

1.  **[定義]** 10進数 $35$ を 2進法で表せ。
    > **Prog Link**: `fmt.Printf("%b", 35)`。

2.  **[定義]** 2進数 $10110_2$ を 10進法で表せ。
    > **Prog Link**: $1 \cdot 2^4 + 0 \cdot 2^3 + 1 \cdot 2^2 + 1 \cdot 2^1 + 0 \cdot 2^0$。

3.  **[16進法]** 10進数 $255$ を 16進法で表せ。
    > **Prog Link**: `0xFF`。カラーコードやメモリアドレスで頻出。

4.  **[16進法]** 16進数 $2\text{A}_{16}$ を 10進法で表せ。

5.  **[n進法の加算]** 2進数の足し算 $1011_2 + 1101_2$ を計算し、結果を2進数で答えよ。
    > **Prog Link**: `ADD` 命令。キャリー（繰り上がり）の処理。

6.  **[n進法の減算]** 2進数の引き算 $1100_2 - 101_2$ を計算し、結果を2進数で答えよ。

7.  **[小数の変換]** 10進数の小数 $0.625$ を 2進法で表せ。
    > **Algorithm**: 小数部分を2倍して整数部分を取り出す操作を繰り返す。

8.  **[小数の変換]** 2進数の小数 $0.11_2$ を 10進法で表せ。
    > **Prog Link**: $1 \cdot 2^{-1} + 1 \cdot 2^{-2} = 0.5 + 0.25$。

9.  **[基数変換]** 8進数 $37_8$ を 2進法で表せ。
    > **Tip**: 8は $2^3$ なので、8進数の1桁は2進数の3桁に対応する。

10. **[桁数]** 2進数で10桁の数は、10進数ではおよそ何桁の数になるか。 $\log_{10} 2 \approx 0.3010$ を用いて答えよ。
    > **Prog Link**: ビット数と表現可能な値の範囲。

---

## Phase 2: Applied Mastery (応用・実践 10問)

**指針**: 「迷ったら『具体例』で実験せよ」。 $n$ 進法の方程式は、一度10進法に戻して考えると解きやすい。

11. **[n進法の決定]**
    ある自然数を 5進法で表すと $23_5$ となり、 $n$ 進法で表すと $16_n$ となる。 $n$ の値を求めよ。
    > **Logic**: $2 \cdot 5 + 3 = 1 \cdot n + 6$ という方程式を解く。

12. **[n進法の決定]**
    方程式 $13_n + 24_n = 41_n$ が成り立つような基数 $n$ を求めよ。
    > **Maxim**: 「条件を使い切ったか確認せよ」。各位の数字は $n$ 未満でなければならない（$n > 4$）。

13. **[循環小数]**
    分数 $\frac{1}{3}$ を 2進法で表すと循環小数になる。これを記せ。
    > **Prog Link**: 10進数で割り切れる小数が、2進数では無限小数になる（浮動小数点誤差の原因）。

14. **[有限小数]**
    分数 $\frac{1}{n}$ を $k$ 進法で表したとき、有限小数になるための条件は何か。
    > **Logic**: $n$ の素因数がすべて $k$ の素因数に含まれていること。

15. **[倍数判定]**
    $n$ 進法において、各位の数字の和が $n-1$ の倍数であれば、元の数は $n-1$ の倍数であることを証明せよ。
    > **Prog Link**: 10進数における「9の倍数判定法」の一般化。

16. **[重りの問題]** (発展)
    天秤ばかりを使って、1gから40gまでのすべての整数の重さを量りたい。分銅を最小個数にするには、何gの分銅を用意すればよいか。また、それは何進法の考え方に基づいているか。
    > **Tip**: 3進法（平衡3進法）。分銅は皿の左右どちらにも置ける（$+1, 0, -1$）。

17. **[ビット演算]**
    $x = 1100_2, y = 1010_2$ とする。 $x$ と $y$ のビットごとの論理積 (AND)、論理和 (OR)、排他的論理和 (XOR) を求めよ。

18. **[補数表現]**
    4ビットの2進数において、2の補数表現を用いた場合、 $-3$ はどのように表されるか。
    > **Prog Link**: `int8` などの負の数の内部表現。ビット反転して+1。

19. **[16進数の計算]**
    $3\text{C}_{16} + 2\text{E}_{16}$ を計算し、結果を16進数で答えよ。

20. **[桁数の一般化]**
    $n$ 進法で $k$ 桁の数は、 $n^{k-1}$ 以上 $n^k - 1$ 以下の範囲にある。
    $2^{100}$ は10進法で何桁の数か。 $\log_{10} 2 = 0.3010$ とする。
    > **Prog Link**: 暗号鍵の強度見積もり。

---

## 解答と解説

### Phase 1

1.  **$100011_2$**
    *   $35 = 32 + 2 + 1 = 100000_2 + 10_2 + 1_2$。
2.  **22**
    *   $16 + 4 + 2 = 22$。
3.  **$\text{FF}_{16}$**
    *   $255 = 16^2 - 1$。
4.  **42**
    *   $2 \times 16 + 10 = 32 + 10 = 42$。
5.  **$11000_2$**
    *   $1011 + 1101$:
        *   1の位: $1+1=10_2$ (0, carry 1)
        *   2の位: $1+0+1=10_2$ (0, carry 1)
        *   4の位: $0+1+1=10_2$ (0, carry 1)
        *   8の位: $1+1+1=11_2$ (1, carry 1)
    *   $11000_2$。
6.  **$111_2$**
    *   $1100 - 101$:
        *   $100 - 1 = 11$ (借りてくる)
        *   $10 - 0 = 10$ ?
        *   筆算:
            ```
              1100
            -  101
            ------
               111
            ```
        *   検算: $12 - 5 = 7 = 111_2$。
7.  **$0.101_2$**
    *   $0.625 \times 2 = 1.25 \to 1$
    *   $0.25 \times 2 = 0.5 \to 0$
    *   $0.5 \times 2 = 1.0 \to 1$
8.  **$0.75$**
    *   $1/2 + 1/4 = 0.5 + 0.25 = 0.75$。
9.  **$11111_2$**
    *   $3 \to 011, 7 \to 111$。
    *   $011111_2$。
10. **4桁**
    *   $2^{10} \approx 10^3$ ($1024 \approx 1000$)。
    *   正確には $10 \log_{10} 2 = 3.01$。整数部分+1で4桁。

### Phase 2

11. **$n = 7$**
    *   $2 \times 5 + 3 = 13$。
    *   $n + 6 = 13 \Rightarrow n = 7$。
12. **$n = 6$**
    *   $(n+3) + (2n+4) = 4n+1$。
    *   $3n+7 = 4n+1 \Rightarrow n = 6$。
    *   各位の数字 $1, 2, 3, 4$ はすべて6未満なので適する。
13. **$0.010101..._2$ ($0.\dot{0}\dot{1}_2$)**
    *   $1 \div 3$ (2進法筆算):
        *   $1 \div 11_2$:
        *   $100 \div 11 = 1$ 余り $1$
        *   $100 \div 11 = 1$ 余り $1$ ...
14. **$n$ の素因数が $k$ の素因数のみで構成されること**
    *   10進法 ($k=10=2 \cdot 5$) なら、$n$ の素因数が 2, 5 のみであること。
15. **証明**
    *   $N = a_k n^k + \dots + a_1 n + a_0$。
    *   $n \equiv 1 \pmod{n-1}$ より $n^k \equiv 1$。
    *   $N \equiv a_k + \dots + a_1 + a_0 \pmod{n-1}$。
    *   よって各位の和が $n-1$ で割り切れれば、$N$ も割り切れる。
16. **1g, 3g, 9g, 27g (3進法)**
    *   $1, 3, 3^2, 3^3$。
    *   例えば $2 = 3 - 1$, $5 = 9 - 3 - 1$。
    *   $1+3+9+27 = 40$ まで表現可能。
17. **AND: $1000_2$, OR: $1110_2$, XOR: $0110_2$**
    *   $1100$
    *   $1010$
    *   AND: 1000
    *   OR: 1110
    *   XOR: 0110
18. **$1101_2$**
    *   $3 = 0011_2$。
    *   反転: $1100_2$。
    *   +1: $1101_2$。
19. **$6\text{A}_{16}$**
    *   $\text{C} (12) + \text{E} (14) = 26 = 16 + 10 = 1\text{A}_{16}$。
    *   $3 + 2 + 1 (\text{carry}) = 6$。
20. **31桁**
    *   $\log_{10} 2^{100} = 100 \times 0.3010 = 30.10$。
    *   $30 < \log N < 31$ なので $10^{30} < N < 10^{31}$。
    *   よって31桁。

