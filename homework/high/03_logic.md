# 数学I: 命題と論理 (Session 3)

**対象**: 社会人エンジニア (Rust/Go)
**学習目標**: 命題の真偽、条件（必要条件・十分条件）、対偶証明法、背理法を習得する。これらはプログラミングにおける条件分岐、型システム、形式検証の基礎となる。

---

## Phase 1: Foundational Check (基礎確認 10問)

**指針**: 「困ったときは『定義』に還れ」。論理記号（$\Rightarrow, \iff, \neg$）の定義を厳密に適用せよ。

1.  **[定義]** 「命題」とは何か、簡潔に定義せよ。また、次の文は命題か？「100は大きな数である」。
    > **Prog Link**: `Boolean` 型の式として評価可能かどうか。 `true` か `false` が定まるものが命題。

2.  **[真偽判定]** 次の命題の真偽を述べよ。
    (1) $3$ は素数である。
    (2) 実数 $x$ について、 $x^2 = 1 \Rightarrow x = 1$。

3.  **[条件の否定]** 条件「$x > 3$」の否定を述べよ。また、条件「$x = 0$ かつ $y = 0$」の否定を述べよ。
    > **Prog Link**: `!(x > 3)` は `x <= 3`。 `!(x==0 && y==0)` は `x!=0 || y!=0` (De Morgan)。

4.  **[必要条件・十分条件]**
    $p \Rightarrow q$ が真であるとき、$p$ は $q$ であるための何条件か。また、$q$ は $p$ であるための何条件か。
    > **Prog Link**: 型 $P$ が型 $Q$ のサブタイプ ($P <: Q$) であるとき、 $P$ 型のインスタンスは $Q$ 型としても扱える（十分条件）。 $Q$ 型であることは $P$ 型であるための必要条件。

5.  **[逆・裏・対偶]**
    命題 $p \Rightarrow q$ の「逆」「裏」「対偶」を記号で表せ。また、元の命題と真偽が必ず一致するのはどれか。

6.  **[対偶の作成]**
    命題「$x^2$ が奇数ならば、 $x$ は奇数である」の対偶を述べよ。

7.  **[反例]**
    命題「$x^2 > 4 \Rightarrow x > 2$」が偽であることを示す反例を一つ挙げよ。
    > **Prog Link**: テストケースによるバグ検出。たった一つの `Fail` ケースがあれば仕様（命題）は満たされない。

8.  **[集合と論理]**
    条件 $p, q$ の真理集合を $P, Q$ とする。 $p \Rightarrow q$ が真であることと、集合 $P, Q$ の包含関係 ($P \subset Q$) は同値である。これを用いて、「$x$ が4の倍数ならば $x$ は2の倍数である」を集合の言葉で説明せよ。

9.  **[「すべての」「ある」]**
    命題「すべての実数 $x$ について $x^2 \ge 0$」の否定を述べよ。
    > **Prog Link**: `All` (forall) の否定は `Any` (exists) の否定条件。 `!∀x. P(x)` $\iff$ `∃x. !P(x)`。

10. **[背理法の論理]**
    背理法とはどのような証明方法か。「矛盾」という言葉を使って説明せよ。

---

## Phase 2: Applied Mastery (応用・実践 10問)

**指針**: 「『解き方』は一つにあらず」。対偶を利用するか、背理法を利用するか、直接証明するか。最適なアルゴリズムを選択せよ。

11. **[必要・十分条件の判定]**
    $x, y$ は実数とする。次の $\Box$ に「必要」「十分」「必要十分」「どちらでもない」のいずれかを入れよ。
    (1) $x = y$ は $x^2 = y^2$ であるための $\Box$ 条件である。
    (2) $xy > 0$ は $x > 0$ かつ $y > 0$ であるための $\Box$ 条件である。
    > **Tip**: 矢印 $p \Rightarrow q$ と $q \Rightarrow p$ の両方をチェックする。反例を探すときは「0」や「負の数」を疑え。

12. **[対偶証明法]**
    整数 $n$ について、「$n^2$ が3の倍数ならば、 $n$ は3の倍数である」ことを対偶を用いて証明せよ。
    > **Logic**: 対偶「$n$ が3の倍数でないなら、$n^2$ は3の倍数でない」を示す。剰余系 ($n=3k+1, 3k+2$) で分類（Case Analysis）。

13. **[背理法]**
    $\sqrt{3}$ が無理数であることを用いて、 $1 + 2\sqrt{3}$ が無理数であることを証明せよ。
    > **Maxim**: 「困ったときは『定義』に還れ」。有理数と仮定して矛盾を導く。

14. **[否定命題の作成]**
    「$x, y$ の少なくとも一方は無理数である」の否定を述べよ。
    > **Prog Link**: `! (isIrrational(x) || isIrrational(y))` $\iff$ `isRational(x) && isRational(y)`。

15. **[入り組んだ論理]**
    3つの条件 $p, q, r$ について、 $p \Rightarrow q$ が真、 $q \Rightarrow r$ が真であるとき、 $p$ は $r$ であるための何条件か。
    > **Prog Link**: 推移律 (Transitive property)。 $A \to B \to C$ ならば $A \to C$。継承関係の推移。

16. **[条件の強弱]**
    条件 $p: |x| < 1$、条件 $q: |x| < 2$ とする。条件 $p$ は条件 $q$ よりも「強い」条件か、「弱い」条件か？（制約が厳しい方を「強い」とする）。
    > **Prog Link**: 事前条件 (Precondition) の強化と事後条件 (Postcondition) の緩和。

17. **[「すべての」と「ある」の真偽]**
    次の命題の真偽を答えよ。
    (1) ある実数 $x$ について、 $x^2 + 1 = 0$。
    (2) すべての自然数 $n$ について、 $n^2 + n + 41$ は素数である。
    > **Hint**: (2)はオイラーの素数生成多項式だが... $n=41$ を試せ（境界値テスト）。

18. **[論理パズル]**
    A, B, C の3人がいる。
    *   A「私は正直者だ」
    *   B「Aは嘘つきだ」
    *   C「Bは嘘つきだ」
    正直者が1人だけいるとき、それは誰か？
    > **Algorithm**: 全探索 (Brute Force)。Aが正直の場合、Bが正直の場合...と仮定して矛盾がないかチェックする。

19. **[絶対値と必要十分]**
    $|x| = x$ であるための必要十分条件を求めよ。
    > **Maxim**: 「間違いは成長の肥料なり」。 $x > 0$ と答えがちだが、 $x = 0$ を忘れていないか？

20. **[高難度：背理法の応用]**
    $a, b, c$ が整数で $a^2 + b^2 = c^2$ を満たすとき、 $a, b$ のうち少なくとも1つは3の倍数であることを証明せよ。
    > **Logic**: 背理法。「$a, b$ がともに3の倍数でない」と仮定する。 $x^2 \equiv 1 \pmod 3$ （$x$が3の倍数でない時）を利用する。

---

## 解答と解説

### Phase 1

1.  **定義**
    *   命題: 正しいか正しくないか（真偽）が客観的に定まる文や式。
    *   「100は大きな数である」は主観によるため命題ではない。
2.  **真偽**
    *   (1) 真。
    *   (2) 偽。反例 $x = -1$。
3.  **否定**
    *   $x \le 3$。
    *   $x \ne 0$ または $y \ne 0$。
4.  **十分条件、必要条件**
    *   $p$ は $q$ の十分条件（$p$ であれば十分）。
    *   $q$ は $p$ の必要条件（$p$ であるためには $q$ が必要）。
5.  **逆・裏・対偶**
    *   逆: $q \Rightarrow p$
    *   裏: $\bar{p} \Rightarrow \bar{q}$
    *   対偶: $\bar{q} \Rightarrow \bar{p}$
    *   真偽が一致するのは「対偶」。
6.  **対偶**
    *   「$x$ が奇数でない（偶数）ならば、 $x^2$ は奇数でない（偶数）である」。
7.  **反例**
    *   $x = -3$。 $x^2 = 9 > 4$ を満たすが、 $x > 2$ を満たさない。
8.  **包含関係**
    *   4の倍数の集合 $P$ は、2の倍数の集合 $Q$ の部分集合である ($P \subset Q$)。
9.  **否定**
    *   「ある実数 $x$ について $x^2 < 0$」。
10. **背理法**
    *   命題が成り立たないと仮定して推論を進め、矛盾（定義や公理、既知の事実に反すること）を導くことで、元の命題が正しいと結論づける方法。

### Phase 2

11. **判定**
    *   (1) **十分条件**。 $x=y \Rightarrow x^2=y^2$ は真。逆は $x=1, y=-1$ などがあり偽。
    *   (2) **必要条件**。 $x>0, y>0 \Rightarrow xy>0$ は真。逆は $x=-1, y=-1$ があり偽。
12. **証明**
    *   対偶「$n$ が3の倍数でないならば、 $n^2$ は3の倍数でない」を示す。
    *   $n$ が3の倍数でないとき、 $k$ を整数として $n=3k+1$ または $n=3k+2$ と表せる。
    *   (i) $n=3k+1$ のとき: $n^2 = (3k+1)^2 = 9k^2 + 6k + 1 = 3(3k^2+2k) + 1$。よって3で割ると1余る。
    *   (ii) $n=3k+2$ のとき: $n^2 = (3k+2)^2 = 9k^2 + 12k + 4 = 3(3k^2+4k+1) + 1$。よって3で割ると1余る。
    *   いずれも $n^2$ は3の倍数ではない。対偶が真であるため、元の命題も真である。
13. **証明**
    *   $1+2\sqrt{3}$ が有理数であると仮定する。その有理数を $r$ と置く。
    *   $1+2\sqrt{3} = r \Rightarrow 2\sqrt{3} = r - 1 \Rightarrow \sqrt{3} = \frac{r-1}{2}$。
    *   $r$ は有理数なので、右辺 $\frac{r-1}{2}$ も有理数である。
    *   しかし左辺 $\sqrt{3}$ は無理数である。これは矛盾。
    *   よって $1+2\sqrt{3}$ は無理数である。
14. **否定**
    *   「$x, y$ はともに有理数である」。
15. **十分条件**
    *   $p \Rightarrow r$ が成り立つため。
16. **強い条件**
    *   $p$ ($|x|<1$) を満たす集合は $q$ ($|x|<2$) の部分集合。範囲が狭い（制約がきつい）方が「強い」。
17. **真偽**
    *   (1) **偽**。 $x^2 = -1$ となる実数は存在しない。
    *   (2) **偽**。 $n=41$ のとき $41^2 + 41 + 41 = 41(41+1+1) = 41 \times 43$ となり合成数。
18. **C**
    *   Aが正直と仮定 $\to$ Bは嘘つき（Aの発言より） $\to$ Cは正直（Bの発言「Aは嘘つき」が嘘＝Aは正直、と矛盾しないが... Bが嘘つきならCの発言「Bは嘘つき」は正しいのでCも正直。正直者が2人になるので矛盾）。
    *   Bが正直と仮定 $\to$ Aは嘘つき（Bの発言より） $\to$ Aの発言「私は正直」は嘘（矛盾なし）。Cの発言「Bは嘘つき」は嘘 $\to$ Cは嘘つき。正直者はBのみ。矛盾なし。
    *   よって正直者は **B**。
    *   (再確認: Cが正直と仮定 $\to$ Bは嘘つき $\to$ Bの発言「Aは嘘つき」は嘘 $\to$ Aは正直。正直者がA, Cの2人になるので矛盾)
    *   **訂正**:
        *   Case 1 (A=True): A=T $\to$ B says "A is Liar" (False) $\to$ B=F. C says "B is Liar" (True) $\to$ C=T. (T, F, T) $\to$ 2人正直。NG。
        *   Case 2 (B=True): B=T $\to$ A is Liar $\to$ A=F. A says "I am True" (False) $\to$ OK. C says "B is Liar" (False) $\to$ C=F. (F, T, F) $\to$ 1人正直。OK。
        *   Case 3 (C=True): C=T $\to$ B is Liar $\to$ B=F. B says "A is Liar" (False) $\to$ A=T. (T, F, T) $\to$ 2人正直。NG。
    *   答え: **B**。
19. **$x \ge 0$**
    *   $x$ が0以上のとき、かつその時に限り等式が成り立つ。
20. **証明**
    *   背理法。 $a, b$ がともに3の倍数でないと仮定する。
    *   $a \equiv \pm 1 \pmod 3, b \equiv \pm 1 \pmod 3$。
    *   $a^2 \equiv 1, b^2 \equiv 1 \pmod 3$。
    *   $a^2 + b^2 \equiv 1 + 1 = 2 \pmod 3$。
    *   一方、平方数 $c^2$ を3で割った余りは 0 または 1 しかあり得ない（$0^2=0, (\pm 1)^2=1$）。
    *   $c^2 \equiv 2$ となることはあり得ず、矛盾。
    *   よって $a, b$ の少なくとも一方は3の倍数である。
