# 数学A: 確率 (1) 確率の定義と基本性質 (Session 28)

**対象**: 社会人エンジニア (Rust/Go)
**学習目標**: 確率の定義（同様に確からしい）を理解し、集合論と結びつけて確率の加法定理や余事象の確率を計算できるようにする。

---

## Phase 1: Foundational Check (基礎確認 10問)

**指針**: 「困ったときは『定義』に還れ」。 $P(A) = n(A) / n(U)$。ただし、根元事象が等確率であることが前提。

1.  **[確率の定義]** サイコロを1回投げるとき、奇数の目が出る確率を求めよ。
    > **Logic**: 全事象 $U=\{1, \dots, 6\}$, 事象 $A=\{1, 3, 5\}$。 $3/6 = 1/2$。

2.  **[同様に確からしい]** 「明日雨が降る確率は50%（降るか降らないかの2択だから）」という推論の誤りを指摘せよ。
    > **Maxim**: 「前提を疑え」。2つの事象が等確率とは限らない。

3.  **[積の法則と確率]** 2枚の硬貨を同時に投げるとき、2枚とも表が出る確率を求めよ。
    > **Prog Link**: 独立事象の積。 $1/2 \times 1/2$。

4.  **[順列と確率]** 1, 2, 3 のカードを並べて3桁の整数を作るとき、それが偶数になる確率を求めよ。

5.  **[組合せと確率]** 赤玉3個、白玉2個が入った袋から2個同時に取り出すとき、2個とも赤玉である確率を求めよ。
    > **Formula**: $_3C_2 / _5C_2$。

6.  **[和事象の確率]** サイコロを1回投げるとき、2の倍数または3の倍数が出る確率を求めよ。
    > **Formula**: $P(A \cup B) = P(A) + P(B) - P(A \cap B)$。

7.  **[排反事象]** 1から10までのカードから1枚引くとき、それが「素数」である事象と「4の倍数」である事象は排反か。

8.  **[余事象の確率]** 3枚の硬貨を同時に投げるとき、少なくとも1枚は裏が出る確率を求めよ。
    > **Maxim**: 「『少なくとも』は『余事象』を疑え」。 $1 - P(\text{全部表})$。

9.  **[確率の範囲]** 確率 $P(A)$ のとりうる値の範囲を不等式で表せ。

10. **[期待値の定義]** サイコロを1回投げたときの出る目の期待値を求めよ。
    > **Prog Link**: `sum(value * prob)`。加重平均。

---

## Phase 2: Applied Mastery (応用・実践 10問)

**指針**: 「条件を使い切ったか確認せよ」。確率計算は「場合の数の比」に帰着させるか、「確率の積・和」で計算するか、状況に応じて使い分けよ。

11. **[最大値の確率]**
    サイコロを2回投げるとき、出る目の最大値が4以下になる確率を求めよ。
    > **Logic**: 2回とも4以下であればよい。

12. **[最大値の確率（等号なし）]**
    サイコロを2回投げるとき、出る目の最大値がちょうど4になる確率を求めよ。
    > **Algorithm**: (最大値4以下) - (最大値3以下)。累積分布関数の差分。

13. **[和の確率]**
    サイコロを2個同時に投げるとき、目の和が7になる確率を求めよ。
    > **Prog Link**: 2つのサイコロの和の分布（三角分布）。

14. **[くじ引き]**
    10本のくじの中に当たりが3本ある。A君、B君の順に引くとき（引いたくじは戻さない）、B君が当たる確率を求めよ。
    > **Maxim**: 「くじ引きは公平である」。計算順序によらず確率は等しい。

15. **[じゃんけん]**
    3人でじゃんけんをして、あいこになる確率を求めよ。
    > **Logic**: (全員同じ手) + (全員違う手)。

16. **[幾何学的確率]**
    長さ $L$ の線分上にランダムに2点をとり、その間隔が $L/2$ 以上になる確率を求めよ。
    > **Visualization**: $xy$ 平面上の領域 $0 \le x, y \le L$ における面積比。

17. **[原因の確率]** (Session 30への導入)
    ある病気にかかっている確率は 0.1% である。検査で陽性が出る確率は、病気なら 99%、病気でなくても 5% である。検査で陽性が出たとき、本当に病気である確率は高いか低いか。直感で答えよ。

18. **[モンテカルロ法]**
    正方形の中に内接円を描き、ランダムに点を打つことで円周率 $\pi$ を近似できる。点が円内に入る確率はいくつか。
    > **Prog Link**: $\pi r^2 / (2r)^2 = \pi / 4$。

19. **[誕生日のパラドックス]**
    何人集まれば、その中に同じ誕生日のペアがいる確率が50%を超えるか。
    (a) 23人 (b) 50人 (c) 183人
    > **Prog Link**: ハッシュ衝突の確率。

20. **[プログラミング]**
    `rand()` 関数（0.0〜1.0の一様乱数）を使って、確率 $p$ で `true` を返す関数 `bernoulli(p)` を実装せよ。
    > **Code**: `return rand() < p;`

---

## 解答と解説

### Phase 1

1.  **1/2**
2.  **解説**
    *   「降る」と「降らない」は同様に確しか（等確率）ではない。気象条件による。
3.  **1/4**
4.  **1/3**
    *   偶数は一の位が2のみ。 $2! / 3! = 2/6 = 1/3$。
5.  **3/10**
    *   $_3C_2 / _5C_2 = 3 / 10$。
6.  **2/3**
    *   $A=\{2, 4, 6\}, B=\{3, 6\}$。
    *   $P(A)=3/6, P(B)=2/6, P(A \cap B)=1/6$。
    *   $3/6 + 2/6 - 1/6 = 4/6 = 2/3$。
7.  **排反である**
    *   素数 $\{2, 3, 5, 7\}$。4の倍数 $\{4, 8\}$。共通部分なし。
8.  **7/8**
    *   $1 - (1/2)^3 = 1 - 1/8 = 7/8$。
9.  **$0 \le P(A) \le 1$**
10. **3.5**
    *   $(1+2+3+4+5+6)/6 = 3.5$。

### Phase 2

11. **4/9**
    *   $(4/6) \times (4/6) = (2/3)^2 = 4/9$。
12. **7/36**
    *   (4以下) $4^2 = 16$通り。
    *   (3以下) $3^2 = 9$通り。
    *   $16 - 9 = 7$通り。 $7/36$。
13. **1/6**
    *   (1,6), (2,5), (3,4), (4,3), (5,2), (6,1) の6通り。 $6/36 = 1/6$。
14. **3/10**
    *   A当たりB当たり: $(3/10)(2/9) = 6/90$。
    *   AはずれB当たり: $(7/10)(3/9) = 21/90$。
    *   $27/90 = 3/10$。
15. **1/3**
    *   全員同じ: 3通り。
    *   全員違う: $3! = 6$通り。
    *   計9通り。全体 $3^3 = 27$。
    *   $9/27 = 1/3$。
16. **1/4**
    *   $|x-y| \ge L/2$。
    *   正方形 $L \times L$ 内で、対角線から距離がある領域。
    *   隅の2つの三角形（面積 $(L/2)^2/2 \times 2 = L^2/4$）。
    *   $(L^2/4) / L^2 = 1/4$。
17. **低い（2%程度）**
    *   ベースレートの誤謬。病気の人が非常に少ないため、偽陽性が圧倒的に多くなる。
18. **$\pi/4$**
19. **(a) 23人**
    *   $1 - (365/365)(364/365)\dots$。
20. **解説**
    *   一様乱数が $p$ 未満であれば事象発生とする。

